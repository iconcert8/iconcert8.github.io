<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/global.css">
    <script src="/js/custom-nav.js" type="text/javascript" defer></script>
    <title>Java Object Ordinary Pointers</title>
  </head>
  <body>
    <custom-nav href="/study/study.html"></custom-nav>
    <div class="mx-4 mt-4 text-center"><h1>🏗️Java Object Ordinary Pointers</h1></div>
    <p class="text-center mb-0" style="font-size: small;">iconcert8's log</p>
    <p class="text-center text-secondary" style="font-size: x-small;">2023-02-28</p>
    <div class="m-4 d-flex justify-content-center">
        <div class="d-inline-block limit-width">
            <h2>Object Ordinary Pointer(OOPs)</h2>
            <p>
              JVM의 Heap 영역 주소를 가리키는 포인터이다. 32bit or 64bit로 가리킨다.
            </p>
            <h2>Compressed OOPs</h2>
            <p>
              64bit 환경으로 넘어오면서 4GB 이상의 주소 값을 32bit 포인터로 가리킬 수 없게 되었다.
              그래서 32bit 주소 값에 2³을 곱하여 32GB(4x2³) 주소까지 표현 가능하게 만들었다. 
              3칸의 시프트 연산을 하여 주소 값을 찾아 가는 것이다.
              <br><br>
              굳이 64bit 주소를 사용안하고 32bit로 사용하는 이유는 성능과 효율때문이다. 
              64bit의 포인터를 사용하게 되면 최대 영역이 18.5EB(2^64)이 된다. 
              JVM이 관리하는 영역이 기하 급수적으로 늘게 된다. 
              일반적으로 대부분의 서비스는 한참 못미치는 영역을 사용하게 된다. 
              그래서 32GB 이하의 영역은 Compressed OOPs를 적용하여 효율을 높인다.
              <br><br>
              <strong>Zero Based Heap Memory</strong>라는 개념이 있다. Heap 주소 값이 '0'부터 시작하는 것이다.
              만약 Heap 주소값이 '0'부터 시작하지 않으면 Compressed OOPs는 offset 만큼 더하기 연산이 진행되어야 한다.
              때문에 Zero Based 갖춰 주는게 좋다. 최대 메모리에 영향을 받기 때문에, 32GB 보다 조금 아래의 값을 세팅하면서 Zero Based 옵션이 활성화 됐는지 확인하면서 설정해야 한다. 
            </p>
            
        </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </body>
</html>
