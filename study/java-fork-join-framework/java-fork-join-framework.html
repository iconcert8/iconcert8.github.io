<!DOCTYPE html>
<html>
  <head>
    <script src="/study/study-template.js" type="text/javascript"></script>
    <meta
      id="contentInfo"
      title="ğŸ“œJava Fork/Join Framework"
      date="2023-02-24"
    />
    <title>Java Fork/Join Framework</title>
  </head>
  <body>
    <h2>Fork/Join Framework</h2>
    ë³‘ë ¬ ìŠ¤ë ˆë“œ ì²˜ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê²Œ ë„ì™€ì£¼ëŠ” Java ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
    <strong>ë¶„í• /ì •ë³µ ì•Œê³ ë¦¬ì¦˜</strong>ì„ ì°¨ìš©í•´ Taskë¥¼ ë‚˜ëˆ„ê³  ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬
    í›„ ë³‘í•©í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤.

    <br /><br />
    <h2>ì‚¬ìš© ë°©ë²•</h2>
    ë°˜í™˜ ê°’ì´ ìˆëŠ” <strong>RecursiveTask&lt;T&gt;</strong>, ë°˜í™˜ ê°’ì´ ì—†ëŠ”
    <strong>RecursiveAction</strong>ì„ êµ¬í˜„í•˜ëŠ” 2ê°€ì§€ê°€ ìˆë‹¤. <br /><br />

    RecusiveTask&lt;T&gt; ì˜ˆì œë§Œ ë³´ê¸°ë¡œ í•œë‹¤. ë‹¤ìŒì€ 1~10ì˜ ìˆ«ìë¥¼ ëª¨ë‘ ë”í•˜ëŠ”
    ì˜ˆì‹œì´ë‹¤.
    <br /><br />
    <p class="text-secondary" style="font-size: small">
      <strong>*ForkJoinPool</strong>ì˜ ìŠ¤ë ˆë“œë“¤ì€ ìì‹ ì˜ ì‘ì—…ì´ ë‹¤ ëë‚˜ê³  ì‘ì—…ì´
      ì—†ìœ¼ë©´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ ì‘ì—…ì„ ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í•œë‹¤.
    </p>
    <pre class="p-4 my-2 bg-light">
public static void main(String[] args) {
    ForkJoinPool forkJoinPool = new ForkJoinPool(3);
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;() {{
        addAll(List.of(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));
    }};

    MyRecursiveTask recursiveTask = new MyRecursiveTask(list);
    Future&lt;Integer&gt; sum = forkJoinPool.submit(recursiveTask);

    try {
        System.out.println("sum : " + sum.get());
        forkJoinPool.shutdown();
        System.out.println(forkJoinPool.awaitTermination(1000, TimeUnit.MILLISECONDS));
    } catch (InterruptedException | ExecutionException e) {
        throw new RuntimeException(e);
    }
}

public static class MyRecursiveTask extends RecursiveTask&lt;Integer&gt; {
    List&lt;Integer&gt; values;

    public MyRecursiveTask(List&lt;Integer&gt; values) {
        this.values = values;
    }

    @Override
    protected Integer compute() {
        if (values.size() > 2) {
            int size = values.size();
            List&lt;Integer&gt; list1 = values.subList(0, size / 2);
            List&lt;Integer&gt; list2 = values.subList(size / 2, size);

            MyRecursiveTask subTask1 = new MyRecursiveTask(list1);
            MyRecursiveTask subTask2 = new MyRecursiveTask(list2);
            System.out.println(Thread.currentThread().getName() + " divide fork: " + list1 + ", " + list2);
            subTask1.fork();
            subTask2.fork();

            return subTask1.join() + subTask2.join();
        }
        int sum = values.stream().reduce(Integer::sum).get();
        System.out.println(Thread.currentThread().getName() + " : " + values + ", sum : " + sum);
        return sum;
    }
}
</pre
    >

    <br />
    ê²°ê³¼ ì¶œë ¥
    <pre class="p-4 my-2 bg-light">
ForkJoinPool-1-worker-3 divide fork: [1, 2, 3, 4, 5], [6, 7, 8, 9, 10]
ForkJoinPool-1-worker-3 divide fork: [1, 2], [3, 4, 5]
ForkJoinPool-1-worker-5 divide fork: [6, 7], [8, 9, 10]
ForkJoinPool-1-worker-7 divide fork: [3], [4, 5]
ForkJoinPool-1-worker-5 : [6, 7], sum : 13
ForkJoinPool-1-worker-7 : [3], sum : 3
ForkJoinPool-1-worker-3 : [1, 2], sum : 3
ForkJoinPool-1-worker-5 divide fork: [8], [9, 10]
ForkJoinPool-1-worker-7 : [4, 5], sum : 9
ForkJoinPool-1-worker-5 : [8], sum : 8
ForkJoinPool-1-worker-7 : [9, 10], sum : 19
sum : 55
true
</pre
    >
    <div class="m-2 text-secondary">
      - ë¦¬ìŠ¤íŠ¸ì˜ ì‚¬ì´ì¦ˆê°€ <strong>2ê°œ ì´í•˜</strong>ê°€ ë  ë•Œ ê¹Œì§€ ë‚˜ëˆˆë‹¤.
      <br />
      - 2ê°œ ì´í•˜ê°€ ëœ ë¦¬ìŠ¤íŠ¸ëŠ” ì‘ì—…ì´ ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œê°€ ë”í•˜ê¸° ì—°ì‚°ì„ ì§„í–‰í•œë‹¤.
      <br />
      - ê²°ê³¼ ê°’ì„ ë°˜í™˜í•œë‹¤.
    </div>
  </body>
</html>
